======================================================================
 NP_LDWeather  ver 1.0.2
 
                               GASOLINE STAND  http://hrgs.itbdns.com/
***********************************************************************


目次.
---------------------------------------
1.概要
2.動作環境
3.インストール方法
4.使用方法
5.デザインの変更方法
6.動作URLの変更方法
7.更新履歴
---------------------------------------


1.概要
　livedoorの天気予報サービス「Weather Hacks」を使った
　天気予報を表示するプラグインです。クライアント⇔サーバー間の
　やりとりにAJAXを使用しているのでページのリロードが発生しないのが
　特徴です(半分自己満足です)。
　
　
2.動作環境
　nucleus:
　　バージョンは不明です。おそらく2以降であれば大丈夫だと思います。
　　EUC-JP、UTF-8の両方で動作します。
　　
　PHPのバージョン：
　　PHP5.1.2で確認しています。PHP4系では別途パッチが必要になります。
　　パッチは以下のサイトから入手してください。
　　
　　[Arakiさんのサイト]
　　http://www.wildtree.jp/~araki/nucleus/index.php?itemid=38
　　
　PHPの設定：
　　デフォルトのままであれば変更する必要はないと思います。
　　
　ライブラリ：
　　PEAR::Cache/Liteを使用していますが、これについてはプラグインに
　　同梱しています。これとは別にDOMDocumentクラスを使用しているので
　　DOM関数が使用可能である必要があります。
　
　ブラウザ：
　　IE6、Firefox1.5で確認しています。その他のブラウザでは動作確認していません。


3.インストール方法
　NP_LDWeather.phpと「ldweather」ディレクトリをnucleusのplugins
　フォルダへアップロードして下さい。アップロード後、
　「ldweather」ディレクトリ内にある「cache_data」というディレクトリの
　パーミッションを書き込み可能な「777」または「700」等に変更して下さい。


4.使用方法
　スキンやテンプレート中に「<%LDWeather%>」と書いて下さい。


5.デザインの変更方法
　プラグイン管理画面から、デザインのHTMLを編集できます。
　基本的には、HTMLタグにid属性として「weather_xxx」を指定すると
　javascriptでそのタグが置き換えられるといった動作をします。
　・・・あまり使い勝手がよくないですが、
　以下のようなルールになっています。
　
　□weather_city_menu
　　観測地点のプルダウンメニューのID。
　　必ず<select>タグに指定して下さい。
　
　□weather_pub_time0 〜 weather_pub_time2
　　今日(=0)〜明後日(=2)までの「予報データの発表日」。
　
　□weather_date0 〜 weather_date2
　　今日(=0)〜明後日(=2)までの日付。
　　現バージョンでは書式は「YYYY年MM月DD日」で固定です。
　
　□weather_img0 〜 weather_img2
　　今日(=0)〜明後日(=2)までの天気の画像。
　
　□weather_telop0 〜 weather_telop2
　　今日(=0)〜明後日(=2)までの天気の文字列。(『晴れ』など)
　
　□weather_temp_max0 〜 weather_temp_max2
　　今日(=0)〜明後日(=2)までの最高気温(単位：℃)。
　
　□weather_temp_min0 〜 weather_temp_min2
　　今日(=0)〜明後日(=2)までの最低気温(単位：℃)。
　
　□weather_desc0 〜 weather_desc2
　　今日(=0)〜明後日(=2)までの気象情報の詳細。
　
　
　--使用例------------------------------------------------
　　
　　観測点一覧：<select id="weather_city_menu"></select>
　　今日の天気：<font id="weather_telop0"></font><br>
　　画像：<font id="weather_img0"></font>
　　
　--------------------------------------------------------

　また、各天気に対応する画像(現時点では1.gif〜30.gif)を独自に
　用意することで天気の画像を任意に変えることも可能です。
　プラグインのオプションで「天気画像のディレクトリのURL」に
　用意した画像のURL(ディレクトリ名まで)を指定して下さい。
　(ディレクトリ名の末尾は「/」で終わらせて下さい。)
　
　※この機能は完全に非公式なので、Weather Hacksが使う天気画像の
　　ファイル名が変わった場合などに、動作しなくなります。


6.動作URLの変更方法
　デフォルトではこのプラグインはjsファイルや、jsファイルが呼び出す
　phpファイルをnucleusのpluginsディレクトリ下の「ldweather」から
　呼び出します。nucleusを「/diary/」にインストールしている場合、
　jsファイルのURLは「/diary/nucleus/plugins/ldweather/js/xxx.js」
　となります。本来「/diary/nucleus/」以下のURLというのは
　知り得ないURLなので、これはあまりよくないと思い、プラグインの
　オプションで変更可能にしてあります。
　例えば、pluginsディレクトリ下の「ldweather」ディレクトリを
　根こそぎ「/weather」に移動させて、オプション画面で「/weather/」を
　指定することで、jsファイルは「/weather/」から呼び出されるようになります。


7.更新履歴
　1.0.2  --- nucleusの文字コードがUTF-8でも動作するように修正。(2006-06-11)
　           画像のディレクトリ名を指定していない場合に画像が表示
　           できなくなっていたのを修正。
　1.0.1  --- allow_url_openがoffの場合でも使用できるように修正。(2006-06-11)
　           aj.php、画像のディレクトリ名が「/」で終わっていなくても動作するように修正。
　1.0.0  --- 初公開。(2006-02-17)
